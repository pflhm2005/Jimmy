<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=gb2312" />
<title>无标题文档</title>
<style type="text/css">
body{
 	margin:0px;
	padding:0px;
}
#s{
	float:left;
	width:100px;
	height:100px;
	background-color:#999999;
}
#sin{
	float:left;
	width:50px;
	height:50px;
	background-color:rgba(255,255,255,0.5);
	position:absolute;
	left: 0px;
	top: 0px;
}
#b{
	float:left;
	width:300px;
	height:300px;
	background-color:#FFCCCC;
	overflow:hidden;
}
 
</style>
<script language="javascript" src="js/jquery-1.12.3.js"></script>
<script language="javascript" type="text/javascript">
	
	$(document).ready(function(){
		
		$("#b").hide();
		
		//鼠标是否按下
		var movetf=false;
		var mousex;//鼠标的横坐标
		var mousey;//鼠标的纵坐标
		var dol;//
		var dot;
		var imgl;//图片左侧坐标
		var imgt;//图片上面坐标
		$("#sin").mousedown(function(e){
			
			dol=$("#sin").offset().left;//移动块的左侧坐标
			
			dot=$("#sin").offset().top;//移动块的上面坐标
			imgl=$("#imgid").offset().left;
			imgt=$("#imgid").offset().top;
			mousex=e.pageX;//获取鼠标按下的横坐标
			mousey=e.pageY;//获取鼠标按下的纵坐标
			movetf=true;//鼠标按下
			$("#b").show();
			
		});
		//鼠标抬起
		$("#sin").mouseup(function(){
			movetf=false;
		});
		//鼠标移出
		$("#sin").mouseout(function(){
			movetf=false;
		});
		//鼠标移动
		$("#sin").mousemove(function(e){
			//鼠标按下
			if(movetf){
				var mx=e.pageX-mousex;//横向移动距离
				var my=e.pageY-mousey;//纵向移动距离
				var sin_t=dot+my;
				var sin_l=dol+mx;
				
				if(sin_t>=0&&sin_t<=50){
					if(sin_l>=0&&sin_l<=50){
						$("#sin").offset({top:sin_t,left:dol+mx});
					};
				}
				var imgtt=imgt-(my*6);
				var imgll=imgl-(mx*6);
				if(imgtt<=0&&imgtt>=-294){
					if(imgll<=100&&imgll>=-200){
				
						$("#imgid").offset({top:imgtt,left:imgll});
				
					};
				}
			}
		});
	});
</script>
</head>

<body>
	<div id="s">
		<img width="100px" height="100px" src="img/3.jpg" />
		<div id="sin"></div>
	</div>
	<div id="b">
		<img id="imgid" width="600px" height="600px" src="img/3.jpg" />
	</div>
</body>
</html>
