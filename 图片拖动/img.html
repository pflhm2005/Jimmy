<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=gb2312" />
<title>�ޱ����ĵ�</title>
<style type="text/css">
body{
 	margin:0px;
	padding:0px;
}
#s{
	float:left;
	width:100px;
	height:100px;
	background-color:#999999;
}
#sin{
	float:left;
	width:50px;
	height:50px;
	background-color:rgba(255,255,255,0.5);
	position:absolute;
	left: 0px;
	top: 0px;
}
#b{
	float:left;
	width:300px;
	height:300px;
	background-color:#FFCCCC;
	overflow:hidden;
}
 
</style>
<script language="javascript" src="js/jquery-1.12.3.js"></script>
<script language="javascript" type="text/javascript">
	
	$(document).ready(function(){
		var movetf=false;
		var mousex;			//鼠标x坐标
		var mousey;			//鼠标y坐标
		var dol;			//灰化框的坐标x
		var dot;			//灰化框的坐标y
		var imgl;			//实际图片的起点坐标x
		var imgt;			//实际图片的起点坐标y
		$("#sin").mousedown(function(e){
			dol=$("#sin").offset().left;
			dot=$("#sin").offset().top;
			imgl=$("#imgid").offset().left;
			imgt=$("#imgid").offset().top;
			mousex=e.pageX;
			mousey=e.pageY;
		});
		$("#sin").mouseup(function(){
			movetf=false;
		});
		$("#sin").mouseout(function(){
			movetf=false;
		});
		$("#sin").mousemove(function(e){
			if(movetf){
				var mx=e.pageX-mousex;
				var my=e.pageY-mousey;
				$("#sin").offset({top:dot+my,left:dol+mx});
				$("#imgid").offset({top:imgt-(my*6),left:imgl-(mx*6)});
				console.log($("#sin").offset().left);
			}
		});
	});
</script>
</head>

<body>
	<div id="s">
		<img width="100px" height="100px" src="img/6.jpg" />
		<div id="sin"></div>
	</div>
	<div id="b">
		<img id="imgid" width="600px" height="600px" src="img/6.jpg" />
	</div>
</body>
</html>
